{"version":3,"sources":["../../src/js/partials/_pad.js","../../src/js/clinics/_global.js","../../src/js/clinics/_site3.js","../../src/js/clinics/_pavilion.js","../../src/js/partials/_helper.js","../../src/js/partials/_events.js","../../src/js/partials/_canvas.js","../../src/js/partials/_sceneLights.js","../../src/js/partials/_hotspots.js","../../src/js/partials/_raycaster.js","../../src/js/partials/_floor.js","../../src/js/partials/_media.js","../../src/js/partials/_clinics.js","../../src/js/partials/_controller.js"],"names":["PAD","Data","Options","bgColor","skyColor","hotspotColor","fog","minDistance","maxDistance","minPolarAngle","maxPolarAngle","showLights","Global","geometry","name","THREE","PlaneBufferGeometry","position","rotation","sceneLights","type","intensity","sky","ground","color","shadow","Site3","models","path","hotspots","data","url","caption","title","description","floor","Pavilion","scale","comments","Helpers","degRad","deg","Math","PI","loadModels","group","loader","ObjectLoader","forEach","model","load","object","children","mesh","baseMaterial","MeshPhongMaterial","flatShading","side","DoubleSide","material","castShadow","receiveShadow","set","add","loadGeometry","objects","Mesh","Events","on","eventName","fn","events","push","off","i","length","splice","emit","Canvas","toggleFullScreen","document","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","stage","getElementById","stageWidth","offsetWidth","stageHeight","offsetHeight","scene","Scene","camera","PerspectiveCamera","Color","fogColor","renderer","WebGLRenderer","controls","OrbitControls","onWindowResize","aspect","updateProjectionMatrix","setSize","update","render","GameLoop","requestAnimationFrame","background","Fog","enableKeys","shadowMap","enabled","shadowMapSoft","appendChild","domElement","window","addEventListener","SceneLights","clinic","lights","globalLights","Group","sphere","addDirectional","light","source","DirectionalLight","addAmbient","AmbientLight","addPoint","PointLight","distance","decay","MeshBasicMaterial","addHemisphere","HemisphereLight","SphereBufferGeometry","Hotspots","ConeBufferGeometry","points","counterDiv","querySelector","counter","updateCounter","amount","innerHTML","parseInt","incCounter","decCounter","checkCounter","clicked","rotate","y","_newItem","Media","_prevItem","userData","_noItem","hotspot","t","increment","MeshLambertMaterial","emissive","emissiveIntensity","shape","x","commentID","toLowerCase","sin","Raycaster","emitter","rays","event","raycaster","mouse","mouse3D","Vector3","rect","getBoundingClientRect","top","body","scrollTop","left","scrollLeft","vector3D","clone","unproject","clientX","clientY","sub","normalize","intersectObjects","onClick","preventDefault","intersects","current","CLICK_INTERSECTED","parent","Texture","getObjectByName","map","needsUpdate","video","texture","VideoTexture","UVMapping","minFilter","LinearFilter","magFilter","format","RGBFormat","src","play","showVideo","player","iframe","close","classList","remove","click","showImage","figure","showText","setTimeout","Clinics","clinics","buttons","querySelectorAll","active","button","dataset"],"mappings":"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","file":"main.js","sourcesContent":["\"use strict\";\n\nvar PAD = {};\nPAD.Data = {};\n\nPAD.Options = {\n\tbgColor : 0x009dd2,\n\tskyColor : 0xffd898,\n\thotspotColor : 0xffca03,\n\tfog : true,\n\tminDistance : 30,\n\tmaxDistance : 80,\n\tminPolarAngle : 25,\n\tmaxPolarAngle : 55,\n\tshowLights: false\n};\n\n// bgColor : 0xffdae6,\n// skyColor : 0x23c9f3,\n// hotspotColor : 0xE69920,","PAD.Data.Global = {\n\t\"geometry\" : [\n\t\t{\n\t\t\t\"name\": \"WorldFloor\",\n\t\t\t\"geometry\": new THREE.PlaneBufferGeometry(256, 256, 1, 1),\n\t\t\t\"position\" : [0, 0, 0],\n\t\t\t\"rotation\" : [-90, 0, 0]\n\t\t}\n\t],\n\t\"sceneLights\": [\n\t\t{\n\t\t\t\"type\": \"Ambient\",\n\t\t\t\"intensity\" : 0.5\n\t\t},\n\t\t{\n\t\t\t\"type\": \"Hemisphere\",\n\t\t\t\"sky\": PAD.Options.skyColor,\n\t\t\t\"ground\" : PAD.Options.bgColor,\n\t\t\t\"intensity\" : 0.5\n\t\t},\n\t\t{\n\t\t\t\"type\": \"Point\",\n\t\t\t\"color\": 0xdf7599,\n\t\t\t\"position\": [1.9, 7.5, -5],\n\t\t\t\"shadow\" : true,\n\t\t\t\"intensity\" : 0.2\n\t\t},\n\t\t{\n\t\t\t\"type\": \"Point\",\n\t\t\t\"color\": 0xb2e8f7,\n\t\t\t\"position\": [1.9, 20, 5.1],\n\t\t\t\"shadow\" : true,\n\t\t\t\"intensity\" : 0.3\n\t\t},\n\t\t{\n\t\t\t\"type\": \"Point\",\n\t\t\t\"color\": 0xdf7599,\n\t\t\t\"position\": [1.9, 7.5, 20],\n\t\t\t\"shadow\" : true,\n\t\t\t\"intensity\" : 0.2\n\t\t},\n\t\t{\n\t\t\t\"type\": \"Point\",\n\t\t\t\"color\": 0xdf7599,\n\t\t\t\"position\": [1.9, 7.5, -15],\n\t\t\t\"shadow\" : true,\n\t\t\t\"intensity\" : 0.2\n\t\t}\n\t]\n};","PAD.Data.Site3 = {\n\t\"models\" : [\n\t\t{\n\t\t\t\"name\": \"floor\",\n\t\t\t\"path\": \"assets/models/site3/site3-floor.json\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"layout\",\n\t\t\t\"path\": \"assets/models/site3/site3-layout.json\"\n\t\t}\n\t],\n\t\"hotspots\" : [\n\t\t{\n\t\t\t\"name\" : \"handwash\",\n\t\t\t\"position\" : [8.24, 3, 21.6],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"image\",\n\t\t\t\t\"url\" : \"https://placekitten.com/1920/1080\",\n\t\t\t\t\"caption\": \"Hello World!\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"touchscreen\",\n\t\t\t\"position\" : [6.5, 3, 14.34],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"video\",\n\t\t\t\t\"url\" : \"https://player.vimeo.com/video/87651855\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"waiting-costa\",\n\t\t\t\"position\" : [13.92, 3, 13.74],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"image\",\n\t\t\t\t\"url\" : \"https://placekitten.com/1920/1080\",\n\t\t\t\t\"caption\": \"Hello World!\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"waiting-bench\",\n\t\t\t\"position\" : [11.48, 3, 2.66],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"image\",\n\t\t\t\t\"url\" : \"https://placekitten.com/1920/1080\",\n\t\t\t\t\"caption\": \"Hello World!\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"waiting-corner\",\n\t\t\t\"position\" : [9.78, 3, 1.24],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"image\",\n\t\t\t\t\"url\" : \"https://placekitten.com/1920/1080\",\n\t\t\t\t\"caption\": \"Hello World!\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"toilets\",\n\t\t\t\"position\" : [22.38, 6, 3.18],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"video\",\n\t\t\t\t\"url\" : \"https://www.youtube.com/embed/MbDzrNM5qYg\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"spiro\",\n\t\t\t\"position\" : [-0.32, 3, 23.06],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"text\",\n\t\t\t\t\"title\": \"Pulmonary Function\",\n\t\t\t\t\"description\" : \"So in spirometry you will blow into the machine and they will put a new mouthpiece on so that it’s completely hygienic…you’re touching equipment and you’re going to touch things, naturally door handles, so they squirt some hand sanitizer in your hand and you rub that in…\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"monday\",\n\t\t\t\"position\" : [-8.58, 6, 6.96],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"text\",\n\t\t\t\t\"title\": \"Monday Clinic\",\n\t\t\t\t\"description\" : \"Different days of the week and different spaces for different bacterial ‘cohorts’\",\n\t\t\t\t\"floor\" : \"assets/textures/site3/site3-floor.mp4\" \n\t\t\t}\n\t\t}\n\t]\n};","PAD.Data.Pavilion = {\n\t\"models\" : [\n\t\t{\n\t\t\t\"name\": \"floor\",\n\t\t\t\"path\": \"assets/models/pavilion/pavilion-floor.json\",\n\t\t\t\"scale\" : [0.7, 0.7, 0.7]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"beds\",\n\t\t\t\"path\": \"assets/models/pavilion/pavilion-beds.json\",\n\t\t\t\"scale\" : [0.7, 0.7, 0.7]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"layout\",\n\t\t\t\"path\": \"assets/models/pavilion/pavilion-layout.json\",\n\t\t\t\"scale\" : [0.7, 0.7, 0.7]\n\t\t}\n\t],\n\t\"hotspots\" : [\n\t\t{\n\t\t\t\"name\" : \"ward\",\n\t\t\t\"position\" : [1.76, 5, 5.2],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"image\",\n\t\t\t\t\"url\" : \"https://placekitten.com/1920/1080\",\n\t\t\t\t\"caption\": \"Hello World!\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"vestible\",\n\t\t\t\"position\" : [1.76, 5, -4.66],\n\t\t\t\"comments\" : true,\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"text\",\n\t\t\t\t\"url\" : \"https://www.youtube.com/embed/MbDzrNM5qYg\",\n\t\t\t\t\"title\" : \"Vestibles\",\n\t\t\t\t\"description\" : \"<p>Everyone was infested with head and body lice. But never fear, they had an amazing cure for this: mercury! 18th century Europe had a love affair with mercury. They ate it, they rubbed it on their skin, and then they went batshit crazy and died. On the positive side – at least it killed the lice first!</p><p>Everyone was infested with head and body lice. But never fear, they had an amazing cure for this: mercury! 18th century Europe had a love affair with mercury. They ate it, they rubbed it on their skin, and then they went batshit crazy and died. On the positive side – at least it killed the lice first!</p>\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"surgery\",\n\t\t\t\"position\" : [-9.14, 2.52, -9.42],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"video\",\n\t\t\t\t\"url\" : \"https://www.youtube.com/embed/MbDzrNM5qYg\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"kitchen\",\n\t\t\t\"position\" : [5.6, 2.18, -10],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"image\",\n\t\t\t\t\"url\" : \"https://placekitten.com/1280/960/\",\n\t\t\t\t\"caption\": \"The PARC Project is exploring antimicrobial resistance and how cross infection is managed in cystic fibrosis clinics, using qualitative methods, including creative visual approaches. It is a multidisciplinary project involving sociologists of medicine and science, an academic architect, micro-biologists and a graphic artist. The research compares the way three outpatient lung infection clinics attempt to control AMR and cross-infection through the design, practices and architectural layout of their built environments. For further information contact Nik Brown (nik.brown@york.ac.uk) or Chrissy Buse (christina.buse@york.ac.uk).\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"baths\",\n\t\t\t\"position\" : [14.28, 5, -6.80],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"text\",\n\t\t\t\t\"url\" : \"https://www.youtube.com/embed/MbDzrNM5qYg\",\n\t\t\t\t\"title\" : \"18th Century Bathrooms\",\n\t\t\t\t\"description\" : \"<p>Everyone was infested with head and body lice. But never fear, they had an amazing cure for this: mercury! 18th century Europe had a love affair with mercury. They ate it, they rubbed it on their skin, and then they went batshit crazy and died. On the positive side – at least it killed the lice first!</p>\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"porch\",\n\t\t\t\"position\" : [1.76, 3, 15.2],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"video\",\n\t\t\t\t\"url\" : \"https://player.vimeo.com/video/87651855\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"surgery2\",\n\t\t\t\"position\" : [-10.3, 3, -6.92],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"video\",\n\t\t\t\t\"url\" : \"https://www.youtube.com/embed/MbDzrNM5qYg\"\n\t\t\t}\n\t\t}\n\t]\n};","PAD.Helpers = {\n\t\n\tdegRad : function(deg) {\n\t\treturn deg * Math.PI / 180;\n\t},\n\n\tloadModels : function(group, models){\n\n\t\tvar loader = new THREE.ObjectLoader();\n\n\t\tmodels.forEach(function(model){\n\n\t\t\tloader.load(model.path, function(object){\n\n\t\t\t\tobject.children.forEach(function(mesh) {\n\n\t\t\t\t\tvar baseMaterial = new THREE.MeshPhongMaterial({ \n\t\t\t\t\t\tcolor: 0xffffff,\n\t\t\t\t\t\tflatShading: true,\n\t\t\t\t\t\tside: THREE.DoubleSide\n\t\t\t\t\t});\n\n\t\t\t\t\tmesh.material = model.material || baseMaterial;\n\t\t\t\t\tmesh.name = model.name;\n\t\t\t\t\tmesh.castShadow = true;\n\t\t\t\t\tmesh.receiveShadow = object.receiveShadow || false;\n\t\t\t\t\t\n\t\t\t\t\tif (model.scale)\n\t\t\t\t\t\tmesh.scale.set(model.scale[0], model.scale[1], model.scale[2])\n\n\t\t\t\t\tgroup.add(mesh);\n\n\t\t\t\t});\n\n\t\t\t});\n\n\t\t});\n\n\t},\n\n\tloadGeometry : function(group, objects) {\n\n\t\tobjects.forEach(function(object) {\n\n\t\t\tvar baseMaterial = new THREE.MeshPhongMaterial({ \n\t\t\t\tcolor: 0xffffff,\n\t\t\t\tflatShading: true,\n\t\t\t\tside: THREE.DoubleSide\n\t\t\t});\n\n\t\t\tvar mesh = new THREE.Mesh(object.geometry, object.material || baseMaterial);\n\t\t\tmesh.position.set(object.position[0], object.position[1], object.position[2]);\n\t\t\tmesh.rotation.set(\n\t\t\t\tPAD.Helpers.degRad(object.rotation[0]), \n\t\t\t\tPAD.Helpers.degRad(object.rotation[1]), \n\t\t\t\tPAD.Helpers.degRad(object.rotation[2])\n\t\t\t);\n\n\t\t\tmesh.name = object.name;\n\t\t\tmesh.receiveShadow = object.receiveShadow || true;\n\t\t\tmesh.castShadow = object.castShadow || false;\n\n\t\t\tgroup.add(mesh);\n\n\t\t});\n\n\t}\n\n};","PAD.Events = (function(){\n\n\tvar events = {};\n\n    function on(eventName, fn) {\n        events[eventName] = events[eventName] || [];\n        events[eventName].push(fn);\n    }\n\n    function off(eventName, fn) {\n        if (events[eventName]) {\n            for (var i = 0; i < events[eventName].length; i++) {\n                if( events[eventName][i] === fn ) {\n                    events[eventName].splice(i, 1);\n                    break;\n                }\n            }\n        }\n    }\n\n    function emit(eventName, data) {\n        if (events[eventName]) {\n            events[eventName].forEach(function(fn) {\n                fn(data);\n            });\n        }\n    }\n\n    return {\n        on: on,\n        off: off,\n        emit: emit\n    };\n\n})();","PAD.Canvas = (function(){\n\n\t// variables\n\tvar stage = document.getElementById(\"stage\");\n\tvar stageWidth = stage.offsetWidth;\n\tvar stageHeight = stage.offsetHeight;\n\n\tvar scene = new THREE.Scene();\n\tvar camera = new THREE.PerspectiveCamera(45, stageWidth / stageHeight, 0.01, 1000);\n\tvar bgColor = new THREE.Color(PAD.Options.bgColor);\n\tvar fogColor = new THREE.Color(PAD.Options.bgColor);\n\tvar renderer = new THREE.WebGLRenderer();\n\tvar controls = new THREE.OrbitControls(camera, stage);\n\n\t// functions\n\tvar onWindowResize = function() {\n\t\tstageWidth = stage.offsetWidth;\n\t\tstageHeight = stage.offsetHeight;\n\t\tcamera.aspect = stageWidth / stageHeight;\n\t\tcamera.updateProjectionMatrix();\n\t\trenderer.setSize(stageWidth, stageHeight);\n\t\tPAD.Events.emit(\"windowResize\");\n\t}\n\n\tvar update = function(){\n\t\tPAD.Events.emit(\"sceneUpdate\");\n\t};\n\n\tvar render = function(){\n\t\trenderer.render(scene, camera);\n\t\tPAD.Events.emit(\"sceneRender\");\n\t};\n\n\tvar GameLoop = function(){\n\t\trequestAnimationFrame(GameLoop);\n\t\tupdate();\n\t\trender();\n\t};\n\n\t// logic\n\tscene.background = bgColor;\n\tscene.name = \"Scene\";\n\n\tif (PAD.Options.fog)\n\t\tscene.fog = new THREE.Fog(fogColor, 0, PAD.Options.maxDistance * 2);\n\n\tcamera.position.set(0, 0, 50);\n\tcamera.name = \"Camera\";\n\n\tcontrols.minDistance = PAD.Options.minDistance;\n\tcontrols.maxDistance = PAD.Options.maxDistance;\n\tcontrols.maxPolarAngle = PAD.Helpers.degRad(PAD.Options.maxPolarAngle);\n\tcontrols.minPolarAngle = PAD.Helpers.degRad(PAD.Options.minPolarAngle);\n\tcontrols.enableKeys = true;\n\tcontrols.update();\n\n\trenderer.setSize(stageWidth, stageHeight);\n\trenderer.shadowMap.enabled = true;\n\trenderer.shadowMapSoft = true;\n\n\tstage.appendChild(renderer.domElement);\n\twindow.addEventListener(\"resize\", onWindowResize, false);\n\tGameLoop();\n\n\t// window.scene = scene;\n\n\tfunction toggleFullScreen() {\n\n\t\tif (!document.fullscreenElement) {\n\t\t\t\n\t\t\tdocument.documentElement.requestFullscreen();\n\n\t\t} else {\n\t\t\t\n\t\t\tif (document.exitFullscreen)\n\t\t\t\tdocument.exitFullscreen(); \n\t\t}\n\n\t}\n\n\tvar full = document.getElementById(\"fullscreen\");\n\tfull.addEventListener(\"click\", toggleFullScreen);\n\n\treturn {\n\t\tscene: scene,\n\t\tcamera: camera,\n\t\tcontrols: controls,\n\t\trenderer : renderer,\n\t\tstage : stage\n\t}\n\n})();","PAD.SceneLights = (function(clinic, lights){\n\n\tvar showLights = PAD.Options.showLights;\n\tvar globalLights = new THREE.Group();\n\tvar sphere;\n\t\n\tglobalLights.name = \"SceneLights\";\n\n\tvar addDirectional = function(light) {\n\t\tvar source = new THREE.DirectionalLight(light.color);\n\t\tsource.position.set(light.position[0], light.position[1], light.position[2]);\n\t\tsource.castShadow = light.shadow;\n\t\tsource.name = light.name || null;\n\t\tglobalLights.add(source);\n\t}\n\n\tvar addAmbient = function(light) {\n\t\tvar source = new THREE.AmbientLight(light.color || 0x404040, light.intensity || 1);\n\t\tsource.name = light.name || \"Ambient\";\n\t\tglobalLights.add(source);\n\t}\n\n\tvar addPoint = function(light) {\n\t\tvar source = new THREE.PointLight(light.color, light.intensity, light.distance || 0, light.decay || 2);\n\t\tsource.position.set(light.position[0], light.position[1], light.position[2]);\n\n\t\tif (showLights)\n\t\t\tsource.add(new THREE.Mesh(sphere, new THREE.MeshBasicMaterial({ color: light.color })));\n\n\t\tsource.castShadow = light.shadow;\t\n\t\tsource.name = light.name || \"Point\" + light.color;\n\t\tglobalLights.add(source);\n\t}\n\n\tvar addHemisphere = function(light) {\n\t\tvar source = new THREE.HemisphereLight(light.sky, light.ground, light.intensity || 1);\n\t\tsource.name = light.name || \"Sky\";\n\t\tglobalLights.add(source);\n\t}\n\n\tif (showLights)\n\t\tsphere = new THREE.SphereBufferGeometry(0.25, 16, 8);\n\n\tlights.forEach(function(light){\n\n\t\tswitch(light.type) {\n\t\t\tcase \"Directional\" :\n\t\t\t\taddDirectional(light);\n\t\t\t\tbreak;\n\t\t\tcase \"Ambient\" :\n\t\t\t\taddAmbient(light);\n\t\t\t\tbreak;\n\t\t\tcase \"Point\" :\n\t\t\t\taddPoint(light);\n\t\t\t\tbreak;\n\t\t\tcase \"Hemisphere\" :\n\t\t\t\taddHemisphere(light);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t});\n\n\tclinic.add(globalLights);\n\n});","PAD.Hotspots = function(clinic, hotspots) {\n\n\tvar color = PAD.Options.hotspotColor;\n\tvar geometry = new THREE.ConeBufferGeometry(0.4, 1.2, 16);\n\tvar points = new THREE.Group();\n\tvar counterDiv = document.querySelector(\".counter span\");\n\tvar counter = 0;\n\n\tvar updateCounter = function(amount){\n\t\tcounterDiv.innerHTML = parseInt(counterDiv.innerHTML) + amount;\n\t};\n\n\tvar incCounter = function(amount) {\n\t\tupdateCounter(amount);\n\t};\n\n\tvar decCounter = function(amount) {\n\t\tupdateCounter(-amount);\n\t};\n\n\tvar checkCounter = function(data){\n\n\t\tif (data.clicked == false) {\n\t\t\tdecCounter(1);\n\t\t\tdata.clicked = true;\n\t\t}\n\n\t}\n\n\tvar rotate = function(){\n\t\tclinic.rotation.y += PAD.Helpers.degRad(0.07);\n\t};\n\n\tvar _newItem = function(mesh){\n\t\tmesh.scale.set(1.5, 1.5, 1.5);\n\t\tmesh.intensity = mesh.intensity * 3;\n\t\tPAD.Media(mesh);\n\t\tPAD.Events.off(\"sceneUpdate\", rotate);\n\t}\n\n\tvar _prevItem = function(mesh){\n\t\tmesh.scale.set(0.3, 0.3, 0.3);\n\t\tmesh.intensity = mesh.intensity / 6;\n\t\tcheckCounter(mesh.userData);\n\t}\n\n\tvar _noItem = function(mesh) {\n\t\tmesh.scale.set(0.3, 0.3, 0.3);\n\t\tmesh.intensity = mesh.intensity / 6;\n\t\tPAD.Events.on(\"sceneUpdate\", rotate);\n\t\tcheckCounter(mesh.userData);\n\t}\n\n\thotspots.forEach(function(hotspot){\n\n\t\tvar t = 0;\n\t\tvar increment = 0.01 + (counter * 0.005);\n\t\tvar source = new THREE.PointLight(color, 0, hotspot.position[1] * 2, 1);\n\n\t\tvar material = new THREE.MeshLambertMaterial({ \n\t\t\tcolor: color,\n\t\t\temissive: color,\n\t\t\temissiveIntensity: 0.6\n\t\t});\n\n\t\tvar shape = new THREE.Mesh(geometry, material);\n\t\tshape.rotation.x = PAD.Helpers.degRad(180);\n\t\t\n\t\tsource.position.set(hotspot.position[0], hotspot.position[1], hotspot.position[2]);\n\t\tsource.add(shape);\n\t\tsource.castShadow = true;\n\t\tsource.name = \"hotspot-\" + hotspot.name;\n\n\t\tsource.userData = hotspot.data;\n\t\tsource.userData.clicked = false;\n\n\t\tif (hotspot.comments) {\n\t\t\tsource.userData.comments = true;\n\t\t\tsource.userData.commentID = (clinic.name + \"-\" + hotspot.name).toLowerCase();\n\t\t}\n\n\t\tPAD.Events.on(\"sceneUpdate\", function(){\n\t\t\tt += increment;\n\t\t\tshape.position.y = Math.sin(t);\n\t\t});\n\n\t\tpoints.add(source);\n\t\tcounter++;\n\n\t});\n\n\tpoints.name = \"hotspots\";\n\tincCounter(counter);\n\tclinic.add(points);\n\n\tPAD.Raycaster(points, clinic.name);\n\tPAD.Events.on(\"sceneUpdate\", rotate);\n\tPAD.Events.on(clinic.name + \"_prevItem\", _prevItem);\n\tPAD.Events.on(clinic.name + \"_newItem\", _newItem);\n\tPAD.Events.on(clinic.name + \"_noItem\", _noItem);\n\n};","PAD.Raycaster = function(group, emitter){\n\n\tvar CLICK_INTERSECTED;\n\tvar renderer = PAD.Canvas.renderer;\n\n\tfunction rays(event) {\n\n\t\tvar raycaster = new THREE.Raycaster();\n\t\tvar mouse = {x: 0, y: 0};\n\t\tvar mouse3D = new THREE.Vector3();\n\t\tvar camera = PAD.Canvas.camera;\n\t\tvar stage = PAD.Canvas.stage;\n\t\tvar rect = stage.getBoundingClientRect();\n\t\tvar top =  rect.top + document.body.scrollTop;\n\t\tvar left = rect.left + document.body.scrollLeft;\n\t\tvar vector3D = mouse3D.clone().unproject(camera);\n\n\t\tmouse.x = ((event.clientX - left) / stage.offsetWidth ) * 2 - 1;\n\t\tmouse.y = - (((event.clientY - top) / stage.offsetHeight ) * 2 - 1);\n\t\tvector3D.set(mouse.x, mouse.y, 0.5);\n\t\tvector3D.unproject(camera);\n\n\t\traycaster.set(camera.position, vector3D.sub(camera.position).normalize());\n\n\t\treturn raycaster.intersectObjects(group.children, true);\n\n\t}\n\n\tfunction onClick(event) {\n\n\t\tevent.preventDefault();\n\n\t\tvar intersects = rays(event);\n\n\t\tif (intersects.length > 0) {\n\n\t\t\tvar current = intersects[0].object;\n\n\t\t\tif (CLICK_INTERSECTED == current) {\n\t\t\t\tPAD.Events.emit(emitter + \"_currentItem\", current.parent);\n\t\t\t} else if (CLICK_INTERSECTED != current) {\n\t\t\t\t\n\t\t\t\tif (CLICK_INTERSECTED)\n\t\t\t\t\tPAD.Events.emit(emitter + \"_prevItem\", CLICK_INTERSECTED.parent);\n\n\t\t\t\tCLICK_INTERSECTED = current;\n\t\t\t\tPAD.Events.emit(emitter + \"_newItem\", current.parent);\n\t\t\t} \n\n\t\t} else {\n\n\t\t\tif (CLICK_INTERSECTED) {\n\t\t\t\tPAD.Events.emit(emitter + \"_noItem\", CLICK_INTERSECTED.parent);\n\t\t\t}\n\n\t\t\tCLICK_INTERSECTED = null;\n\t\t}\n \n\t}\n\n\tPAD.Events.on(\"sceneRender\", function(){\n\t\trenderer.domElement.addEventListener(\"click\", onClick);\n\t\trenderer.domElement.addEventListener(\"touchend\", onClick);\n\t});\n\n};","PAD.Texture = function(source){\n\n\tvar floor = PAD.Canvas.scene.getObjectByName(\"floor\");\n\n\tif (source == null || source == \"\") {\n\t\t\n\t\tfloor.material.map = null;\n\t\tfloor.material.needsUpdate = true;\n\t\treturn;\n\n\t}\n\n\tvar video = document.getElementById(\"texture\");\n\tvar texture = new THREE.VideoTexture(video, THREE.UVMapping);\n\n\ttexture.minFilter = THREE.LinearFilter;\n\ttexture.magFilter = THREE.LinearFilter;\n\ttexture.format = THREE.RGBFormat;\n\n\tvideo.src = source;\n\tvideo.play();\n\n\tfloor.material.map = texture;\n\tfloor.material.needsUpdate = true;\n\n};","PAD.Media = (function(mesh){\n\n\tvar data = mesh.userData;\n\n\tfunction showVideo(){\n\n\t\tvar player = document.getElementById(\"videoStage\");\n\t\tvar iframe = player.querySelector(\"iframe\");\n\t\tvar close = player.querySelector(\".close\");\n\n\t\tiframe.src = data.url + \"?autoplay=1&portrait=0&controls=0&showinfo=0&rel=1&modestbranding=1\";\n\t\tplayer.classList.remove(\"hidden\");\n\n\t\tclose.addEventListener(\"click\", function(event){\n\t\t\t\n\t\t\tevent.preventDefault();\n\t\t\tiframe.src = \"\";\n\t\t\tplayer.classList.add(\"hidden\");\n\t\t\tPAD.Canvas.renderer.domElement.click();\n\n\t\t});\n\n\t}\n\n\tfunction showImage() {\n\n\t\tvar player = document.getElementById(\"imageStage\");\n\t\tvar figure = player.querySelector(\"figure img\");\n\t\tvar caption = player.querySelector(\"figure figcaption\");\n\t\tvar close = player.querySelector(\".close\");\n\n\t\tfigure.src = data.url;\n\t\tcaption.innerHTML= data.caption;\n\t\tplayer.classList.remove(\"hidden\");\n\n\t\tclose.addEventListener(\"click\", function(event){\n\t\t\t\n\t\t\tevent.preventDefault();\n\t\t\tfigure.src = \"\";\n\t\t\tcaption.innerHTML = \"\";\n\t\t\tplayer.classList.add(\"hidden\");\n\t\t\tPAD.Canvas.renderer.domElement.click();\n\n\t\t});\n\n\t}\n\n\tfunction showText() {\n\n\t\tvar player = document.querySelector(\".content\");\n\t\tplayer.innerHTML = \"<h1>\" + data.title + \"</h1>\" + data.description;\n\n\t\tsetTimeout(function(){\n\t\t\tPAD.Canvas.renderer.domElement.click();\n\t\t}, 2000);\n\t\t\n\t}\n\n\tswitch (data.type) {\n\t\tcase \"video\" :\n\t\t\tshowVideo();\n\t\t\tbreak;\n\t\tcase \"image\" :\n\t\t\tshowImage();\n\t\t\tbreak;\n\t\tcase \"text\" :\n\t\t\tshowText();\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\n\tPAD.Texture(data.floor);\n\n});","PAD.Clinics = (function(){\n\n\tvar clinics = {};\n\n\tfor (var name in PAD.Data){\n\n\t\tvar data = PAD.Data[name];\n\t\tvar clinic = new THREE.Group();\n\n\t\tclinic.name = name;\n\n\t\tif (data.models)\n\t\t\tPAD.Helpers.loadModels(clinic, data.models);\n\n\t\tif (data.geometry)\n\t\t\tPAD.Helpers.loadGeometry(clinic, data.geometry);\n\n\t\tif (data.sceneLights)\n\t\t\tPAD.SceneLights(clinic, data.sceneLights);\n\t\t\n\t\tif (data.hotspots)\n\t\t\tPAD.Hotspots(clinic, data.hotspots);\n\n\t\tclinics[name] = clinic;\n\n\t}\n\n\tdelete PAD.Data;\n\n\treturn clinics;\n\n})();","(function(){\n\n\tvar buttons = document.querySelectorAll(\".clinic\");\n\tvar scene = PAD.Canvas.scene;\n\tvar active;\n\n\tif (PAD.Clinics.Global)\n\t\tscene.add(PAD.Clinics.Global);\n\n\tbuttons.forEach(function(button){\n\n\t\tbutton.addEventListener(\"click\", function(event){\n\n\t\t\tevent.preventDefault();\n\n\t\t\tvar name = button.dataset.clinic;\n\t\t\tvar clinic = PAD.Clinics[name];\n\t\t\tvar current = scene.getObjectByName(active);\n\n\t\t\tif (current == clinic)\n\t\t\t\treturn;\n\n\t\t\tif (current)\n\t\t\t\tscene.remove(current);\n\t\t\t\n\t\t\tif (clinic)\n\t\t\t\tscene.add(clinic);\n\n\t\t\tactive = name;\n\n\t\t});\n\n\t});\n\n\tbuttons[0].click();\n\n})();"]}