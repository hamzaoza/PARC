{"version":3,"sources":["../../src/js/partials/_canvas.js","../../src/js/partials/_pad.js","../../src/js/clinics/_global.js","../../src/js/clinics/_site3.js","../../src/js/clinics/_pavilion.js","../../src/js/partials/_helper.js","../../src/js/partials/_events.js","../../src/js/partials/_sceneLights.js","../../src/js/partials/_hotspots.js","../../src/js/partials/_raycaster.js","../../src/js/partials/_comments.js","../../src/js/partials/_floor.js","../../src/js/partials/_media.js","../../src/js/partials/_clinics.js","../../src/js/partials/_controller.js"],"names":["stage","stageWidth","stageHeight","scene","camera","bgColor","fogColor","renderer","controls","onWindowResize","update","render","GameLoop","window","PAD","Data","Options","skyColor","hotspotColor","fog","minDistance","maxDistance","minPolarAngle","maxPolarAngle","showLights","Global","geometry","name","THREE","PlaneBufferGeometry","position","rotation","sceneLights","type","intensity","sky","ground","color","shadow","Site3","models","path","hotspots","data","url","caption","title","description","floor","Pavilion","scale","comments","Helpers","degRad","deg","Math","PI","loadModels","group","loader","ObjectLoader","forEach","model","load","object","children","mesh","baseMaterial","MeshPhongMaterial","flatShading","side","DoubleSide","material","castShadow","receiveShadow","set","add","loadGeometry","objects","Mesh","Events","on","eventName","fn","events","push","off","i","length","splice","emit","Canvas","document","getElementById","offsetWidth","offsetHeight","Scene","PerspectiveCamera","Color","WebGLRenderer","OrbitControls","aspect","updateProjectionMatrix","setSize","requestAnimationFrame","background","Fog","enableKeys","shadowMap","enabled","shadowMapSoft","appendChild","domElement","addEventListener","SceneLights","clinic","lights","globalLights","Group","sphere","addDirectional","light","source","DirectionalLight","addAmbient","AmbientLight","addPoint","PointLight","distance","decay","MeshBasicMaterial","addHemisphere","HemisphereLight","SphereBufferGeometry","Hotspots","ConeBufferGeometry","points","counterDiv","querySelector","counter","updateCounter","amount","innerHTML","parseInt","incCounter","decCounter","checkCounter","clicked","rotate","y","_newItem","Media","emissive","setHex","emissiveIntensity","_prevItem","userData","_noItem","hotspot","t","increment","MeshLambertMaterial","shape","x","commentID","toLowerCase","sin","Raycaster","emitter","rays","event","raycaster","mouse","mouse3D","Vector3","rect","getBoundingClientRect","top","body","scrollTop","left","scrollLeft","vector3D","clone","unproject","clientX","clientY","sub","normalize","intersectObjects","onClick","preventDefault","intersects","current","CLICK_INTERSECTED","Comments","location","origin","DISQUS","reset","reload","config","this","page","identifier","Texture","checkLoad","video","readyState","map","texture","needsUpdate","setTimeout","getObjectByName","VideoTexture","UVMapping","minFilter","LinearFilter","magFilter","format","RGBFormat","src","play","showVideo","player","iframe","close","classList","remove","click","resetText","showImage","style","backgroundImage","concat","showText","contentCache","content","Clinics","clinics","toggleFullScreen","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","buttons","querySelectorAll","active","gFormBTN","full","button","dataset","Clean","gForm","s","createElement","setAttribute","Date"],"mappings":"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","sourcesContent":["PAD.Canvas = (function(){\n\n\t// variables\n\tvar stage = document.getElementById(\"stage\");\n\tvar stageWidth = stage.offsetWidth;\n\tvar stageHeight = stage.offsetHeight;\n\n\tvar scene = new THREE.Scene();\n\tvar camera = new THREE.PerspectiveCamera(45, stageWidth / stageHeight, 0.01, 1000);\n\tvar bgColor = new THREE.Color(PAD.Options.bgColor);\n\tvar fogColor = new THREE.Color(PAD.Options.bgColor);\n\tvar renderer = new THREE.WebGLRenderer();\n\tvar controls = new THREE.OrbitControls(camera, stage);\n\n\t// functions\n\tvar onWindowResize = function() {\n\t\tstageWidth = stage.offsetWidth;\n\t\tstageHeight = stage.offsetHeight;\n\t\tcamera.aspect = stageWidth / stageHeight;\n\t\tcamera.updateProjectionMatrix();\n\t\trenderer.setSize(stageWidth, stageHeight);\n\t\tPAD.Events.emit(\"windowResize\");\n\t}\n\n\tvar update = function(){\n\t\tPAD.Events.emit(\"sceneUpdate\");\n\t};\n\n\tvar render = function(){\n\t\trenderer.render(scene, camera);\n\t\tPAD.Events.emit(\"sceneRender\");\n\t};\n\n\tvar GameLoop = function(){\n\t\trequestAnimationFrame(GameLoop);\n\t\tupdate();\n\t\trender();\n\t};\n\n\t// logic\n\tscene.background = bgColor;\n\tscene.name = \"Scene\";\n\n\tif (PAD.Options.fog)\n\t\tscene.fog = new THREE.Fog(fogColor, 0, PAD.Options.maxDistance * 2);\n\n\tcamera.position.set(0, 0, 50);\n\tcamera.name = \"Camera\";\n\n\tcontrols.minDistance = PAD.Options.minDistance;\n\tcontrols.maxDistance = PAD.Options.maxDistance;\n\tcontrols.maxPolarAngle = PAD.Helpers.degRad(PAD.Options.maxPolarAngle);\n\tcontrols.minPolarAngle = PAD.Helpers.degRad(PAD.Options.minPolarAngle);\n\tcontrols.enableKeys = true;\n\tcontrols.update();\n\n\trenderer.setSize(stageWidth, stageHeight);\n\trenderer.shadowMap.enabled = true;\n\trenderer.shadowMapSoft = true;\n\n\tstage.appendChild(renderer.domElement);\n\twindow.addEventListener(\"resize\", onWindowResize);\n\tGameLoop();\n\n\twindow.scene = scene;\n\n\treturn {\n\t\tscene: scene,\n\t\tcamera: camera,\n\t\tcontrols: controls,\n\t\trenderer : renderer,\n\t\tstage : stage\n\t}\n\n})();","export default window.PAD = {};\n\nPAD.Data = {};\n\nPAD.Options = {\n\t\"bgColor\" : 0x009dd2,\n\t\"skyColor\" : 0xffd898,\n\t\"hotspotColor\" : 0xffca03,\n\t\"fog\" : true,\n\t\"minDistance\" : 30,\n\t\"maxDistance\" : 80,\n\t\"minPolarAngle\" : 25,\n\t\"maxPolarAngle\" : 55,\n\t\"showLights\": false\n};","PAD.Data.Global = {\n\t\"geometry\" : [\n\t\t{\n\t\t\t\"name\": \"WorldFloor\",\n\t\t\t\"geometry\": new THREE.PlaneBufferGeometry(256, 256, 1, 1),\n\t\t\t\"position\" : [0, 0, 0],\n\t\t\t\"rotation\" : [-90, 0, 0]\n\t\t}\n\t],\n\t\"sceneLights\": [\n\t\t{\n\t\t\t\"type\": \"Ambient\",\n\t\t\t\"intensity\" : 0.5\n\t\t},\n\t\t{\n\t\t\t\"type\": \"Hemisphere\",\n\t\t\t\"sky\": PAD.Options.skyColor,\n\t\t\t\"ground\" : PAD.Options.bgColor,\n\t\t\t\"intensity\" : 0.5\n\t\t},\n\t\t{\n\t\t\t\"type\": \"Point\",\n\t\t\t\"color\": 0xdf7599,\n\t\t\t\"position\": [1.9, 7.5, -5],\n\t\t\t\"shadow\" : true,\n\t\t\t\"intensity\" : 0.2\n\t\t},\n\t\t{\n\t\t\t\"type\": \"Point\",\n\t\t\t\"color\": 0xb2e8f7,\n\t\t\t\"position\": [1.9, 20, 5.1],\n\t\t\t\"shadow\" : true,\n\t\t\t\"intensity\" : 0.3\n\t\t},\n\t\t{\n\t\t\t\"type\": \"Point\",\n\t\t\t\"color\": 0xdf7599,\n\t\t\t\"position\": [1.9, 7.5, 20],\n\t\t\t\"shadow\" : true,\n\t\t\t\"intensity\" : 0.2\n\t\t},\n\t\t{\n\t\t\t\"type\": \"Point\",\n\t\t\t\"color\": 0xdf7599,\n\t\t\t\"position\": [1.9, 7.5, -15],\n\t\t\t\"shadow\" : true,\n\t\t\t\"intensity\" : 0.2\n\t\t}\n\t]\n};","PAD.Data.Site3 = {\n\t\"models\" : [\n\t\t{\n\t\t\t\"name\": \"floor\",\n\t\t\t\"path\": \"assets/models/site3/site3-floor.json\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"layout\",\n\t\t\t\"path\": \"assets/models/site3/site3-layout.json\"\n\t\t}\n\t],\n\t\"hotspots\" : [\n\t\t{\n\t\t\t\"name\" : \"handwash\",\n\t\t\t\"position\" : [8.24, 3, 21.6],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"image\",\n\t\t\t\t\"url\" : \"https://placekitten.com/1920/1080\",\n\t\t\t\t\"caption\": \"Hello World!\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"touchscreen\",\n\t\t\t\"position\" : [6.5, 3, 14.34],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"video\",\n\t\t\t\t\"url\" : \"https://player.vimeo.com/video/87651855\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"waiting-costa\",\n\t\t\t\"position\" : [13.92, 3, 13.74],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"image\",\n\t\t\t\t\"url\" : \"https://placekitten.com/1920/1080\",\n\t\t\t\t\"caption\": \"Hello World!\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"waiting-bench\",\n\t\t\t\"position\" : [11.48, 3, 2.66],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"image\",\n\t\t\t\t\"url\" : \"https://placekitten.com/1920/1080\",\n\t\t\t\t\"caption\": \"Hello World!\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"waiting-corner\",\n\t\t\t\"position\" : [9.78, 3, 1.24],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"image\",\n\t\t\t\t\"url\" : \"https://placekitten.com/1920/1080\",\n\t\t\t\t\"caption\": \"Hello World!\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"toilets\",\n\t\t\t\"position\" : [22.38, 6, 3.18],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"video\",\n\t\t\t\t\"url\" : \"https://www.youtube.com/embed/MbDzrNM5qYg\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"spiro\",\n\t\t\t\"position\" : [-0.32, 3, 23.06],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"text\",\n\t\t\t\t\"title\": \"Pulmonary Function\",\n\t\t\t\t\"description\" : \"So in spirometry you will blow into the machine and they will put a new mouthpiece on so that it’s completely hygienic…you’re touching equipment and you’re going to touch things, naturally door handles, so they squirt some hand sanitizer in your hand and you rub that in…\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"monday\",\n\t\t\t\"position\" : [-8.58, 6, 6.96],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"text\",\n\t\t\t\t\"title\": \"Monday Clinic\",\n\t\t\t\t\"description\" : \"Different days of the week and different spaces for different bacterial ‘cohorts’\",\n\t\t\t\t\"floor\" : \"assets/textures/site3/site3-floor.mp4\" \n\t\t\t}\n\t\t}\n\t]\n};","PAD.Data.Pavilion = {\n\t\"models\" : [\n\t\t{\n\t\t\t\"name\": \"floor\",\n\t\t\t\"path\": \"assets/models/pavilion/pavilion-floor.json\",\n\t\t\t\"scale\" : [0.65, 0.65, 0.65]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"beds\",\n\t\t\t\"path\": \"assets/models/pavilion/pavilion-beds.json\",\n\t\t\t\"scale\" : [0.65, 0.65, 0.65]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"layout\",\n\t\t\t\"path\": \"assets/models/pavilion/pavilion-layout.json\",\n\t\t\t\"scale\" : [0.65, 0.65, 0.65]\n\t\t}\n\t],\n\t\"hotspots\" : [\n\t\t{\n\t\t\t\"name\" : \"ward\",\n\t\t\t\"position\" : [-0.1, 7, 4.36],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"image\",\n\t\t\t\t\"url\" : \"https://placekitten.com/1920/1080\",\n\t\t\t\t\"title\" : \"Main Ward\",\n\t\t\t\t\"description\": \"The main ward.\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"vestible\",\n\t\t\t\"position\" : [-0.1, 5, -8.44],\n\t\t\t\"comments\" : true,\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"text\",\n\t\t\t\t\"title\" : \"Vestibles\",\n\t\t\t\t\"description\" : \"<p>Everyone was infested with head and body lice. But never fear, they had an amazing cure for this: mercury! 18th century Europe had a love affair with mercury. They ate it, they rubbed it on their skin, and then they went batshit crazy and died. On the positive side – at least it killed the lice first!</p><p>Everyone was infested with head and body lice. But never fear, they had an amazing cure for this: mercury! 18th century Europe had a love affair with mercury. They ate it, they rubbed it on their skin, and then they went batshit crazy and died. On the positive side – at least it killed the lice first!</p>\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"surgery\",\n\t\t\t\"position\" : [-14.5, 5, -13.8],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"video\",\n\t\t\t\t\"url\" : \"https://www.youtube.com/embed/MbDzrNM5qYg\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"kitchen\",\n\t\t\t\"position\" : [5.14, 5, -15.06],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"image\",\n\t\t\t\t\"url\" : \"https://placekitten.com/1280/960/\",\n\t\t\t\t\"caption\": \"The PARC Project is exploring antimicrobial resistance and how cross infection is managed in cystic fibrosis clinics, using qualitative methods, including creative visual approaches. It is a multidisciplinary project involving sociologists of medicine and science, an academic architect, micro-biologists and a graphic artist. The research compares the way three outpatient lung infection clinics attempt to control AMR and cross-infection through the design, practices and architectural layout of their built environments. For further information contact Nik Brown (nik.brown@york.ac.uk) or Chrissy Buse (christina.buse@york.ac.uk).\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"baths\",\n\t\t\t\"position\" : [16.16, 6.28, -11.06],\n\t\t\t\"comments\" : true,\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"text\",\n\t\t\t\t\"title\" : \"18th Century Bathrooms\",\n\t\t\t\t\"description\" : \"<p>Everyone was infested with head and body lice. But never fear, they had an amazing cure for this: mercury! 18th century Europe had a love affair with mercury. They ate it, they rubbed it on their skin, and then they went batshit crazy and died. On the positive side – at least it killed the lice first!</p>\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"porch\",\n\t\t\t\"position\" : [-0.1, 7.48, 17.06],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"video\",\n\t\t\t\t\"url\" : \"https://player.vimeo.com/video/87651855\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\" : \"surgery2\",\n\t\t\t\"position\" : [-12.4, 3.44, -11.32],\n\t\t\t\"data\" : {\n\t\t\t\t\"type\" : \"video\",\n\t\t\t\t\"url\" : \"https://www.youtube.com/embed/MbDzrNM5qYg\"\n\t\t\t}\n\t\t}\n\t]\n};","PAD.Helpers = {\n\t\n\tdegRad : function(deg) {\n\t\treturn deg * Math.PI / 180;\n\t},\n\n\tloadModels : function(group, models){\n\n\t\tvar loader = new THREE.ObjectLoader();\n\n\t\tmodels.forEach(function(model){\n\n\t\t\tloader.load(model.path, function(object){\n\n\t\t\t\tobject.children.forEach(function(mesh) {\n\n\t\t\t\t\tvar baseMaterial = new THREE.MeshPhongMaterial({ \n\t\t\t\t\t\tcolor: 0xffffff,\n\t\t\t\t\t\tflatShading: true,\n\t\t\t\t\t\tside: THREE.DoubleSide\n\t\t\t\t\t});\n\n\t\t\t\t\tmesh.material = model.material || baseMaterial;\n\t\t\t\t\tmesh.name = model.name;\n\t\t\t\t\tmesh.castShadow = true;\n\t\t\t\t\tmesh.receiveShadow = object.receiveShadow || false;\n\t\t\t\t\t\n\t\t\t\t\tif (model.scale)\n\t\t\t\t\t\tmesh.scale.set(model.scale[0], model.scale[1], model.scale[2])\n\n\t\t\t\t\tgroup.add(mesh);\n\n\t\t\t\t});\n\n\t\t\t});\n\n\t\t});\n\n\t},\n\n\tloadGeometry : function(group, objects) {\n\n\t\tobjects.forEach(function(object) {\n\n\t\t\tvar baseMaterial = new THREE.MeshPhongMaterial({ \n\t\t\t\tcolor: 0xffffff,\n\t\t\t\tflatShading: true,\n\t\t\t\tside: THREE.DoubleSide\n\t\t\t});\n\n\t\t\tvar mesh = new THREE.Mesh(object.geometry, object.material || baseMaterial);\n\t\t\tmesh.position.set(object.position[0], object.position[1], object.position[2]);\n\t\t\tmesh.rotation.set(\n\t\t\t\tPAD.Helpers.degRad(object.rotation[0]), \n\t\t\t\tPAD.Helpers.degRad(object.rotation[1]), \n\t\t\t\tPAD.Helpers.degRad(object.rotation[2])\n\t\t\t);\n\n\t\t\tmesh.name = object.name;\n\t\t\tmesh.receiveShadow = object.receiveShadow || true;\n\t\t\tmesh.castShadow = object.castShadow || false;\n\n\t\t\tgroup.add(mesh);\n\n\t\t});\n\n\t}\n\n};","PAD.Events = (function(){\n\n\tvar events = {};\n\n    function on(eventName, fn) {\n        events[eventName] = events[eventName] || [];\n        events[eventName].push(fn);\n    }\n\n    function off(eventName, fn) {\n        if (events[eventName]) {\n            for (var i = 0; i < events[eventName].length; i++) {\n                if( events[eventName][i] === fn ) {\n                    events[eventName].splice(i, 1);\n                    break;\n                }\n            }\n        }\n    }\n\n    function emit(eventName, data) {\n        if (events[eventName]) {\n            events[eventName].forEach(function(fn) {\n                fn(data);\n            });\n        }\n    }\n\n    return {\n        on: on,\n        off: off,\n        emit: emit\n    };\n\n})();","PAD.SceneLights = (function(clinic, lights){\n\n\tvar showLights = PAD.Options.showLights;\n\tvar globalLights = new THREE.Group();\n\tvar sphere;\n\t\n\tglobalLights.name = \"SceneLights\";\n\n\tvar addDirectional = function(light) {\n\t\tvar source = new THREE.DirectionalLight(light.color);\n\t\tsource.position.set(light.position[0], light.position[1], light.position[2]);\n\t\tsource.castShadow = light.shadow;\n\t\tsource.name = light.name || null;\n\t\tglobalLights.add(source);\n\t}\n\n\tvar addAmbient = function(light) {\n\t\tvar source = new THREE.AmbientLight(light.color || 0x404040, light.intensity || 1);\n\t\tsource.name = light.name || \"Ambient\";\n\t\tglobalLights.add(source);\n\t}\n\n\tvar addPoint = function(light) {\n\t\tvar source = new THREE.PointLight(light.color, light.intensity, light.distance || 0, light.decay || 2);\n\t\tsource.position.set(light.position[0], light.position[1], light.position[2]);\n\n\t\tif (showLights)\n\t\t\tsource.add(new THREE.Mesh(sphere, new THREE.MeshBasicMaterial({ color: light.color })));\n\n\t\tsource.castShadow = light.shadow;\t\n\t\tsource.name = light.name || \"Point\" + light.color;\n\t\tglobalLights.add(source);\n\t}\n\n\tvar addHemisphere = function(light) {\n\t\tvar source = new THREE.HemisphereLight(light.sky, light.ground, light.intensity || 1);\n\t\tsource.name = light.name || \"Sky\";\n\t\tglobalLights.add(source);\n\t}\n\n\tif (showLights)\n\t\tsphere = new THREE.SphereBufferGeometry(0.25, 16, 8);\n\n\tlights.forEach(function(light){\n\n\t\tswitch(light.type) {\n\t\t\tcase \"Directional\" :\n\t\t\t\taddDirectional(light);\n\t\t\t\tbreak;\n\t\t\tcase \"Ambient\" :\n\t\t\t\taddAmbient(light);\n\t\t\t\tbreak;\n\t\t\tcase \"Point\" :\n\t\t\t\taddPoint(light);\n\t\t\t\tbreak;\n\t\t\tcase \"Hemisphere\" :\n\t\t\t\taddHemisphere(light);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t});\n\n\tclinic.add(globalLights);\n\n});","PAD.Hotspots = function(clinic, hotspots) {\n\n\tvar color = PAD.Options.hotspotColor;\n\tvar geometry = new THREE.ConeBufferGeometry(0.4, 1.2, 16);\n\tvar points = new THREE.Group();\n\tvar counterDiv = document.querySelector(\".counter span\");\n\tvar counter = 0;\n\n\tvar updateCounter = function(amount){\n\t\tcounterDiv.innerHTML = parseInt(counterDiv.innerHTML) + amount;\n\t};\n\n\tvar incCounter = function(amount) {\n\t\tupdateCounter(amount);\n\t};\n\n\tvar decCounter = function(amount) {\n\t\tupdateCounter(-amount);\n\t};\n\n\tvar checkCounter = function(data){\n\n\t\tif (data.clicked == false) {\n\t\t\tdecCounter(1);\n\t\t\tdata.clicked = true;\n\t\t}\n\n\t}\n\n\tvar rotate = function(){\n\t\tclinic.rotation.y += PAD.Helpers.degRad(0.07);\n\t};\n\n\tvar _newItem = function(mesh){\n\t\t// mesh.scale.set(1.5, 1.5, 1.5);\n\t\tPAD.Media(mesh);\n\t\tPAD.Events.off(\"sceneUpdate\", rotate);\n\t\tmesh.material.emissive.setHex(null);\n\t\tmesh.material.emissiveIntensity = 0;\n\t}\n\n\tvar _prevItem = function(mesh){\n\t\t// mesh.scale.set(1, 1, 1);\n\t\tcheckCounter(mesh.userData);\n\t}\n\n\tvar _noItem = function(mesh) {\n\t\tPAD.Events.on(\"sceneUpdate\", rotate);\n\t\t// mesh.scale.set(1, 1, 1);\n\t\tcheckCounter(mesh.userData);\n\t}\n\n\thotspots.forEach(function(hotspot){\n\n\t\t// var t = 0;\n\t\t// var increment = 0.01 + (counter * 0.005);\n\t\t// var source = new THREE.PointLight(color, 0, hotspot.position[1] * 2, 1);\n\n\t\t// var material = new THREE.MeshLambertMaterial({ \n\t\t// \tcolor: color,\n\t\t// \temissive: color,\n\t\t// \temissiveIntensity: 0.6\n\t\t// });\n\n\t\t// var shape = new THREE.Mesh(geometry, material);\n\t\t// shape.rotation.x = PAD.Helpers.degRad(180);\n\t\t\n\t\t// source.position.set(hotspot.position[0], hotspot.position[1], hotspot.position[2]);\n\t\t// source.add(shape);\n\t\t// source.castShadow = true;\n\t\t// source.name = \"hotspot-\" + hotspot.name;\n\n\t\t// source.userData = hotspot.data;\n\t\t// source.userData.clicked = false;\n\n\t\t// if (hotspot.comments) {\n\t\t// \tsource.userData.comments = true;\n\t\t// \tsource.userData.commentID = (clinic.name + \"-\" + hotspot.name).toLowerCase();\n\t\t// }\n\n\t\t// PAD.Events.on(\"sceneUpdate\", function(){\n\t\t// \tt += increment;\n\t\t// \tshape.position.y = Math.sin(t);\n\t\t// });\n\n\t\t// points.add(source);\n\t\t// counter++;\n\n\t\tvar t = 0;\n\t\tvar increment = 0.01 + (counter * 0.005);\n\n\t\tvar material = new THREE.MeshLambertMaterial({ \n\t\t\tcolor: color,\n\t\t\temissive: color,\n\t\t\temissiveIntensity: 0.6\n\t\t});\n\n\t\tvar shape = new THREE.Mesh(geometry, material);\n\t\t\n\t\tshape.rotation.x = PAD.Helpers.degRad(180);\n\t\tshape.position.set(hotspot.position[0], hotspot.position[1], hotspot.position[2]);\n\t\tshape.castShadow = false;\n\t\tshape.name = \"hotspot-\" + hotspot.name;\n\t\tshape.userData = hotspot.data;\n\t\tshape.userData.clicked = false;\n\n\t\tif (hotspot.comments) {\n\t\t\tshape.userData.comments = true;\n\t\t\tshape.userData.commentID = (clinic.name + \"-\" + hotspot.name).toLowerCase();\n\t\t}\n\n\t\tPAD.Events.on(\"sceneUpdate\", function(){\n\t\t\tt += increment;\n\t\t\tshape.position.y = hotspot.position[1] + Math.sin(t);\n\t\t});\n\n\t\tpoints.add(shape);\n\t\tcounter++;\n\n\t});\n\n\tpoints.name = \"hotspots\";\n\tincCounter(counter);\n\tclinic.add(points);\n\n\tPAD.Raycaster(points, clinic.name);\n\tPAD.Events.on(\"sceneUpdate\", rotate);\n\tPAD.Events.on(clinic.name + \"_prevItem\", _prevItem);\n\tPAD.Events.on(clinic.name + \"_newItem\", _newItem);\n\tPAD.Events.on(clinic.name + \"_noItem\", _noItem);\n\n};","PAD.Raycaster = function(group, emitter){\n\n\tvar CLICK_INTERSECTED;\n\tvar renderer = PAD.Canvas.renderer;\n\n\tfunction rays(event) {\n\n\t\tvar raycaster = new THREE.Raycaster();\n\t\tvar mouse = {x: 0, y: 0};\n\t\tvar mouse3D = new THREE.Vector3();\n\t\tvar camera = PAD.Canvas.camera;\n\t\tvar stage = PAD.Canvas.stage;\n\t\tvar rect = stage.getBoundingClientRect();\n\t\tvar top =  rect.top + document.body.scrollTop;\n\t\tvar left = rect.left + document.body.scrollLeft;\n\t\tvar vector3D = mouse3D.clone().unproject(camera);\n\n\t\tmouse.x = ((event.clientX - left) / stage.offsetWidth ) * 2 - 1;\n\t\tmouse.y = - (((event.clientY - top) / stage.offsetHeight ) * 2 - 1);\n\t\tvector3D.set(mouse.x, mouse.y, 0.5);\n\t\tvector3D.unproject(camera);\n\n\t\traycaster.set(camera.position, vector3D.sub(camera.position).normalize());\n\n\t\treturn raycaster.intersectObjects(group.children, true);\n\n\t}\n\n\tfunction onClick(event) {\n\n\t\tevent.preventDefault();\n\n\t\tvar intersects = rays(event);\n\n\t\tif (intersects.length > 0) {\n\n\t\t\tvar current = intersects[0].object;\n\n\t\t\tif (CLICK_INTERSECTED == current) {\n\t\t\t\tPAD.Events.emit(emitter + \"_currentItem\", current);\n\t\t\t} else if (CLICK_INTERSECTED != current) {\n\t\t\t\t\n\t\t\t\tif (CLICK_INTERSECTED)\n\t\t\t\t\tPAD.Events.emit(emitter + \"_prevItem\", CLICK_INTERSECTED);\n\n\t\t\t\tCLICK_INTERSECTED = current;\n\t\t\t\tPAD.Events.emit(emitter + \"_newItem\", current);\n\t\t\t} \n\n\t\t} else {\n\n\t\t\tif (CLICK_INTERSECTED) {\n\t\t\t\tPAD.Events.emit(emitter + \"_noItem\", CLICK_INTERSECTED);\n\t\t\t}\n\n\t\t\tCLICK_INTERSECTED = null;\n\t\t}\n \n\t}\n\n\tPAD.Events.on(\"sceneRender\", function(){\n\t\trenderer.domElement.addEventListener(\"click\", onClick);\n\t\trenderer.domElement.addEventListener(\"touchend\", onClick);\n\t});\n\n};","PAD.Comments = function(commentID) {\n\n\tvar url = window.location.origin + \"/#!demo\" + commentID;\n\n\tDISQUS.reset({\n\t\treload: true,\n\t\tconfig: function () {  \n\t\t\tthis.page.identifier = \"demo\" + commentID,\n\t\t\tthis.page.url = url\n\t\t}\n\t});\n\n};","PAD.Texture = function(source){\n\n\tvar floor = PAD.Canvas.scene.getObjectByName(\"floor\");\n\n\tif (source == null || source == \"\") {\n\t\tfloor.material.map = null;\n\t\tfloor.material.needsUpdate = true;\n\t\treturn;\n\t}\n\n\tvar video = document.getElementById(\"texture\");\n\tvar texture = new THREE.VideoTexture(video, THREE.UVMapping);\n\n\ttexture.minFilter = THREE.LinearFilter;\n\ttexture.magFilter = THREE.LinearFilter;\n\ttexture.format = THREE.RGBFormat;\n\n\tvideo.src = source;\n\tvideo.play();\n\n\tfunction checkLoad() {\n\t\tif (video.readyState === 4) {\n\t\t\tfloor.material.map = texture;\n\t\t\tfloor.material.needsUpdate = true;\n\t\t} else {\n\t\t\tsetTimeout(checkLoad, 100);\n\t\t}\n\t}\n\n\tcheckLoad();\n\n};","PAD.Media = (function(mesh){\n\n\tvar data = mesh.userData;\n\tvar content = document.querySelector(\".content\");\n\n\tfunction showVideo(){\n\n\t\tvar player = document.getElementById(\"videoStage\");\n\t\tvar iframe = player.querySelector(\"iframe\");\n\t\tvar close = player.querySelector(\".close\");\n\n\t\t// iframe.src = data.url + \"?autoplay=1&portrait=0&controls=0&showinfo=0&rel=1&modestbranding=1\";\n\t\tiframe.src = `https://player.vimeo.com/video/117770305?autoplay=1&title=0&byline=0&portrait=0`;\n\t\tplayer.classList.remove(\"hidden\");\n\n\t\tclose.addEventListener(\"click\", function(event){\n\t\t\t\n\t\t\tevent.preventDefault();\n\t\t\tiframe.src = \"\";\n\t\t\tplayer.classList.add(\"hidden\");\n\t\t\tPAD.Canvas.renderer.domElement.click();\n\n\t\t});\n\n\t\tresetText();\n\n\t}\n\n\tfunction showImage() {\n\n\t\tvar player = document.getElementById(\"imageStage\");\n\t\tvar close = player.querySelector(\".close\");\n\n\t\tplayer.style.backgroundImage = `url( ${ data.url } )`;\n\t\tplayer.classList.remove(\"hidden\");\n\n\t\tshowText();\n\n\t\tclose.addEventListener(\"click\", function(event){\n\t\t\t\n\t\t\tevent.preventDefault();\n\t\t\tplayer.classList.add(\"hidden\");\n\t\t\tPAD.Canvas.renderer.domElement.click();\n\t\t\tresetText();\n\n\t\t});\n\n\t}\n\n\tfunction resetText() {\n\n\t\tvar contentCache = '<h1>Pathways, Practices and Architectures</h1><p>The PARC Project is exploring antimicrobial resistance and how cross infection is managed in cystic fibrosis clinics, using qualitative methods, including creative visual approaches. It is a multidisciplinary project involving sociologists of medicine and science, an academic architect, micro-biologists and a graphic artist. The research compares the way three outpatient lung infection clinics attempt to control AMR and cross-infection through the design, practices and architectural layout of their built environments. For further information contact Nik Brown (nik.brown@york.ac.uk) or Chrissy Buse (christina.buse@york.ac.uk).</p>';\n\n\t\tcontent.innerHTML = contentCache;\n\t}\n \n\tfunction showText() {\n\n\t\tcontent.innerHTML = `<h1>${data.title}</h1> ${data.description}`;\n\n\t\tif (data.comments) {\n\t\t\tcontent.innerHTML += \"<div id='disqus_thread'></div>\";\n\t\t\tPAD.Comments(data.commentID);\n\t\t}\n\n\t\tsetTimeout(function(){\n\t\t\tPAD.Canvas.renderer.domElement.click();\n\t\t}, 2000);\n\t\t\n\t}\n\n\tswitch (data.type) {\n\t\tcase \"video\" :\n\t\t\tshowVideo();\n\t\t\tbreak;\n\t\tcase \"image\" :\n\t\t\tshowImage();\n\t\t\tbreak;\n\t\tcase \"text\" :\n\t\t\tshowText();\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\n\tPAD.Texture(data.floor);\n\t\n\t\n});","PAD.Clinics = (function(){\n\n\tvar clinics = {};\n\n\tfor (var name in PAD.Data){\n\n\t\tvar data = PAD.Data[name];\n\t\tvar clinic = new THREE.Group();\n\n\t\tclinic.name = name;\n\n\t\tif (data.models)\n\t\t\tPAD.Helpers.loadModels(clinic, data.models);\n\n\t\tif (data.geometry)\n\t\t\tPAD.Helpers.loadGeometry(clinic, data.geometry);\n\n\t\tif (data.sceneLights)\n\t\t\tPAD.SceneLights(clinic, data.sceneLights);\n\t\t\n\t\tif (data.hotspots)\n\t\t\tPAD.Hotspots(clinic, data.hotspots);\n\n\t\tclinics[name] = clinic;\n\n\t}\n\n\tdelete PAD.Data;\n\n\treturn clinics;\n\n})();","(function(){\n\n\tvar buttons = document.querySelectorAll(\".clinic\");\n\tvar scene = PAD.Canvas.scene;\n\tvar active;\n\n\tif (PAD.Clinics.Global)\n\t\tscene.add(PAD.Clinics.Global);\n\n\tbuttons.forEach(function(button){\n\n\t\tbutton.addEventListener(\"click\", function(event){\n\n\t\t\tevent.preventDefault();\n\n\t\t\tvar name = button.dataset.clinic;\n\t\t\tvar clinic = PAD.Clinics[name];\n\t\t\tvar current = scene.getObjectByName(active);\n\n\t\t\tif (current == clinic)\n\t\t\t\treturn;\n\n\t\t\tif (current) {\n\n\t\t\t\tscene.remove(current);\n\t\t\t\tPAD.Clean(current);\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif (clinic)\n\t\t\t\tscene.add(clinic);\n\n\t\t\tactive = name;\n\n\t\t});\n\n\t});\n\n\tbuttons[0].click();\n\n\tvar gFormBTN = document.getElementById(\"gf-feedback\");\n\n\tgFormBTN.addEventListener(\"click\", function(event){\n\n\t\tvar gForm = document.getElementById(\"surveyStage\");\n\t\tvar close = gForm.querySelector(\".close\");\n\n\t\tgForm.classList.remove(\"hidden\");\n\n\t\tclose.addEventListener(\"click\", function(event){\n\n\t\t\tgForm.classList.add(\"hidden\");\n\t\t\tPAD.Canvas.renderer.domElement.click();\n\t\t\tevent.preventDefault();\n\t\t\t\n\t\t});\n\n\t\tevent.preventDefault();\n\n\t});\n\n\t// Fullscreen toggle.\n\tfunction toggleFullScreen() {\n\n\t\tif (!document.fullscreenElement) {\n\t\t\t\n\t\t\tdocument.documentElement.requestFullscreen();\n\n\t\t} else {\n\t\t\t\n\t\t\tif (document.exitFullscreen)\n\t\t\t\tdocument.exitFullscreen(); \n\t\t}\n\n\t}\n\n\tvar full = document.getElementById(\"fullscreen\");\n\tfull.addEventListener(\"click\", toggleFullScreen);\n\n\t// Add Disqus\n\tvar disqus_config = function () {\n\t\tthis.page.url = window.location.origin + \"/#!\";\n\t\tthis.page.identifier = \"prodhome\";\n\t};\n\t\n\tvar s = document.createElement(\"script\");\n\t\n\ts.src = \"https://pad-1.disqus.com/embed.js\";\n\ts.setAttribute(\"data-timestamp\", +new Date());\n\n\tdocument.body.appendChild(s);\n\n})();"]}